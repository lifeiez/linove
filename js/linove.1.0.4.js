function linove_sidebarFollow(a,b){(new SidebarFollow).init({element:a,distanceToTop:b})}function linove_viewHistory(a){if("undefined"!=typeof localStorage&&"undefined"!=typeof JSON){var b=new ViewHistory;b.init({limit:a.limit,storageKey:a.storageKey,primaryKey:a.primaryKey})}var c=document.getElementById(a.storageKey);if(!b)return c&&(c.style.display="none"),void 0;if(b&&c){var d=b.getHistories(),e=document.createElement("ul");if(d&&d.length>0){for(var f=d.length-1;f>=0;f--){var g=d[f],h=document.createElement("li"),i=document.createElement("a");i.href=g.url,i.innerHTML=g.title,h.appendChild(i),e.appendChild(h)}c.appendChild(e)}}if(b&&a.addHistory){var j={title:document.getElementsByTagName("title")[0].innerHTML.split(a.titleSplit)[0],url:location.href};b.addHistory(j)}}(function(){function a(a){return document.getElementById(a)}function b(b,c){a(b).style.display=c}function c(a,b){a=a||.1,b=b||16;var c=0,d=0,e=0,f=0,g=0,h=0;document.documentElement&&(c=document.documentElement.scrollLeft||0,d=document.documentElement.scrollTop||0),document.body&&(e=document.body.scrollLeft||0,f=document.body.scrollTop||0);var g=window.scrollX||0,h=window.scrollY||0,i=Math.max(c,Math.max(e,g)),j=Math.max(d,Math.max(f,h)),k=1+a;if(window.scrollTo(Math.floor(i/k),Math.floor(j/k)),i>0||j>0){var l="MGJS.goTop("+a+", "+b+")";window.setTimeout(l,b)}}function d(c,d,e,f,g,h){a(e).className=f,a(g).className=h;var i,j;j=c.split(",");for(var k=0;j.length>k;k++){var i=j[k];a(i)&&b(i,"block")}j=d.split(",");for(var k=0;j.length>k;k++)i=j[k],a(i)&&b(i,"none")}function e(){a("comment").onkeydown=function(b){var c=null;c=window.event?window.event:b,null!=c&&c.ctrlKey&&13==c.keyCode&&a("submit").click()},a("submit").value+=" (Ctrl+Enter)"}function f(a,b,c){c=c||document;var d="*"==b&&c.all?c.all:c.getElementsByTagName(b),e=Array();a=a.replace(/\-/g,"\\-");for(var g,f=RegExp("(^|\\s)"+a+"(\\s|$)"),h=0;d.length>h;h++)g=d[h],f.test(g.className)&&e.push(g);return e}window.MGJS={},window.MGJS.$=a,window.MGJS.setStyleDisplay=b,window.MGJS.goTop=c,window.MGJS.switchTab=d,window.MGJS.loadCommentShortcut=e,window.MGJS.getElementsByClassName=f})(),function(){function d(){for(var b="left",d=0;a=document.getElementsByTagName("link")[d];d++)"stylesheet"==a.getAttribute("rel")&&-1!=a.getAttribute("href").indexOf("rtl.1.0.2.css")&&(b="right");var e=document.getElementById("subscribe");e&&new c(e,b);var f=document.getElementById("menus");if(f)for(var g=f.getElementsByTagName("ul"),d=0;g.length>d;d++){var h=g[d].parentNode;h.parentNode===f?new c(h,b):(new c(h,b,1),h.firstChild.className+=" subtitle")}}var b={create:function(){return function(){this.initialize.apply(this,arguments)}}},c=b.create();if(c.prototype={initialize:function(a,b,c){this.obj=cleanWhitespace(a),this.align=b||"left",this.sub=c||-1,this.menu=this.obj.childNodes,2>this.menu.length||(this.title=this.menu[0],this.body=this.menu[1],cleanWhitespace(this.body).lastChild.getElementsByTagName("a")[0].className+=" last",setStyle(this.body,"visibility","hidden"),setStyle(this.body,"display","block"),addListener(this.obj,"mouseover",bind(this,this.activate),!1),addListener(this.obj,"mouseout",bind(this,this.deactivate),!1))},activate:function(){if(1==this.sub){var a=currentOffset(this.title),b=a[1]-1,c=getWidth(this.body)-2;if("right"==this.align)var c=-1*getWidth(this.body)}else{var a=cumulativeOffset(this.title),b=a[1]+getHeight(this.title),c=a[0];"right"==this.align&&(c+=getWidth(this.title)-getWidth(this.body))}/current/.test(this.title.className)||(this.title.className+=" current"),setStyle(this.body,"left",c+"px"),setStyle(this.body,"top",b+"px"),setStyle(this.body,"visibility","visible")},deactivate:function(){this.title.className=this.title.className.replace("current","");var a=this,b=setInterval(function(){return clearInterval(b),/current/.test(a.title.className)||setStyle(a.body,"visibility","hidden"),!1},400)}},$A=function(a){if(!a)return[];if(a.toArray)return a.toArray();for(var b=[],c=0;a.length>c;c++)b.push(a[c]);return b},bind=function(){var a=this.$A(arguments),b=a[a.length-1],c=b,d=a,e=d.shift();return function(){return c.apply(e,d.concat(a))}},getHeight=function(a){return a.offsetHeight},getWidth=function(a){return a.offsetWidth},setStyle=function(a,b,c){a.style[b]=c},cleanWhitespace=function(a){for(var b=a.firstChild;b;){var c=b.nextSibling;3!=b.nodeType||/\S/.test(b.nodeValue)||a.removeChild(b),b=c}return a},currentOffset=function(a){var b=a.offsetTop||0,c=a.offsetLeft||0;return[c,b]},cumulativeOffset=function(a){var b=0,c=0;do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a);return[c,b]},addListener=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},document.addEventListener)document.addEventListener("DOMContentLoaded",d,!1);else if(/MSIE/i.test(navigator.userAgent)){document.write('<script id="__ie_onload_for_linove" defer src="javascript:void(0)"></script>');var e=document.getElementById("__ie_onload_for_linove");e.onreadystatechange=function(){"complete"==this.readyState&&d()}}else if(/WebKit/i.test(navigator.userAgent))var f=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(f),d())},10);else window.onload=function(){d()}}();var searchbox=MGJS.$("searchbox"),searchtxt=MGJS.$("search_textfield"),searchbtn=MGJS.$("search_button"),tiptext="\u5728\u8fd9\u91cc\u8f93\u5165\u6587\u672c\u641c\u7d22";(""==searchtxt.value||searchtxt.value==tiptext)&&(searchtxt.className+=" searchtip",searchtxt.value=tiptext),searchtxt.onfocus=function(){searchtxt.value==tiptext&&(searchtxt.value="",searchtxt.className=searchtxt.className.replace(" searchtip",""))},searchtxt.onblur=function(){""==searchtxt.value&&(searchtxt.className+=" searchtip",searchtxt.value=tiptext)},searchbtn.onclick=function(){return""==searchtxt.value||searchtxt.value==tiptext?!1:void 0},SidebarFollow=function(){this.config={element:null,distanceToTop:0},this.cache={originalToTop:0,prevElement:null,parentToTop:0,placeholder:document.createElement("div")}},SidebarFollow.prototype={init:function(a){this.config=a||this.config;var b=this,c=document.getElementById(b.config.element);if(c){for(var d=b._getPrevElement(c);0>d.offsetHeight&&(d=b._getPrevElement(d)););b.cache.prevElement=d;var e=c.parentNode,f=b._getCumulativeOffset(e).top,g=parseInt(e.style.borderTop,10),h=parseInt(e.style.paddingTop,10);b.cache.parentToTop=f+g+h,b._addListener(window,"scroll",function(){b._scrollScreen({element:c,prevElement:d,_self:b})}),b._addListener(window,"resize",function(){b._scrollScreen({element:c,prevElement:d,_self:b})})}},_scrollScreen:function(a){var b=a._self,c=a.element,d=a.prevElement,e=b.config.distanceToTop,f=parseInt(document.getElementsByTagName("body")[0].style.top,10);isNaN(f)||(e+=f);var g=0;g="fixed"===c.style.position?b._getScrollY():b._getCumulativeOffset(c).top-e;var h=b._getCumulativeOffset(d).top+b._getVisibleSize(d).height;if(b._getScrollY()>g){var i=b._getVisibleSize(c).height;b.cache.placeholder.style.height=i+"px",c.parentNode.insertBefore(b.cache.placeholder,c),b.cache.originalToTop=g,c.style.top=e+"px",c.style.position="fixed"}else if(b.cache.originalToTop>g||h>g){var j=b.cache.placeholder.parentNode;j&&(j.removeChild(b.cache.placeholder),c.style.position="static")}},_getCumulativeOffset:function(a){var b={left:0,top:0};do b.left+=a.offsetLeft||0,b.top+=a.offsetTop||0,a=a.offsetParent;while(a);return b},_getVisibleSize:function(a){var b={width:0,height:0};return b.width=a.offsetWidth,b.height=a.offsetHeight,b},_getScrollY:function(){return window.pageYOffset!==void 0?window.pageYOffset:document.compatMode!==void 0&&"BackCompat"!=document.compatMode?document.documentElement.scrollTop:document.body.scrollTop},_addListener:function(a,b,c){return a.addEventListener?(a.addEventListener(b,c,!1),!0):a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c]),!0):!1},_getPrevElement:function(a){for(var b=a.previousSibling;1!==b.nodeType;)b=b.previousSibling;return b}},function(){function a(a,b,d){var e=MGJS.$(a).innerHTML,f='<a href="#'+b+'">@'+e.replace(/\t|\n|\r\n/g,"")+" </a> \n";c(f,d)}function b(a,b,c,e){var f=MGJS.$(a).innerHTML,g=MGJS.$(c).innerHTML,h='<blockquote cite="#'+c+'">';h+='\n<strong><a href="#'+b+'">'+f.replace(/\t|\n|\r\n/g,"")+"</a> :</strong>",h+=g.replace(/\t/g,""),h+="</blockquote>\n",d(h,e)}function c(a,b){return MGJS.$(b)&&"textarea"==MGJS.$(b).type?(field=MGJS.$(b),field.value.indexOf(a)>-1?(alert("You've already appended this reply!"),!1):(field.value=""==field.value.replace(/\s|\t|\n/g,"")?a:field.value.replace(/[\n]*$/g,"")+"\n\n"+a,field.focus(),void 0)):(alert("The comment box does not exist!"),!1)}function d(a,b){if(!MGJS.$(b)||"textarea"!=MGJS.$(b).type)return alert("The comment box does not exist!"),!1;if(field=MGJS.$(b),document.selection)field.focus(),sel=document.selection.createRange(),sel.text=a,field.focus();else if(field.selectionStart||"0"==field.selectionStart){var c=field.selectionStart,d=field.selectionEnd,e=c;field.value=field.value.substring(0,c)+a+field.value.substring(d,field.value.length),e+=a.length,field.focus(),field.selectionStart=e,field.selectionEnd=e}else field.value+=a,field.focus()}window.MGJS_CMT={},window.MGJS_CMT.reply=a,window.MGJS_CMT.quote=b}(),ViewHistory=function(){this.config={limit:10,storageKey:"viewHistory",primaryKey:"url"},this.cache={localStorage:null,userData:null,attr:null}},ViewHistory.prototype={init:function(a){this.config=a||this.config;var b=this;!window.localStorage&&(this.cache.userData=document.body)&&this.cache.userData.addBehavior&&this.cache.userData.addBehavior("#default#userdata")?(this.cache.userData.load(this.cache.attr="localStorage"),this.cache.localStorage={getItem:function(a){return b.cache.userData.getAttribute(a)},setItem:function(a,c){b.cache.userData.setAttribute(a,c),b.cache.userData.save(b.cache.attr)}}):this.cache.localStorage=window.localStorage},addHistory:function(a){for(var b=this.getHistories(),c=0,d=b.length;d>c;c++)if(a[this.config.primaryKey]&&b[c][this.config.primaryKey]&&a[this.config.primaryKey]===b[c][this.config.primaryKey]){b.splice(c,1);break}b.push(a),this.config.limit>0&&b.length>this.config.limit&&b.splice(0,1);var e=JSON.stringify(b);this.cache.localStorage.setItem(this.config.storageKey,e)},getHistories:function(){var a=this.cache.localStorage.getItem(this.config.storageKey);return a?JSON.parse(a):[]}};